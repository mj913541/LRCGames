<!-- Digital Safety Game ‚Äì Kid Version -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üõ°Ô∏è Stay Safe Online! | Digital Safety Game</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #fef3c7, #e0f2fe);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .game-wrapper {
      width: 100%;
      max-width: 900px;
      padding: 1rem;
    }

    .game-container {
      background: #ffffff;
      border-radius: 1.5rem;
      padding: 1.5rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .game-header {
      margin-bottom: 1rem;
      position: relative;
    }

    .game-title {
      font-size: 1.8rem;
      font-weight: 800;
      color: #1d4ed8;
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      align-items: center;
      justify-content: center;
    }

    .game-title span.small {
      font-size: 0.9rem;
      font-weight: 500;
      color: #6b7280;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      background-color: #e0f2fe;
      color: #0369a1;
      font-size: 0.8rem;
      margin-top: 0.25rem;
    }

    .floating-emoji {
      position: absolute;
      font-size: 1.8rem;
      animation: float 4s ease-in-out infinite;
      opacity: 0.6;
    }

    .emoji-1 {
      top: 0.5rem;
      left: 0.5rem;
      animation-delay: 0s;
    }

    .emoji-2 {
      top: 0.5rem;
      right: 0.5rem;
      animation-delay: 1s;
    }

    .emoji-3 {
      bottom: 0.5rem;
      left: 1.5rem;
      animation-delay: 2s;
    }

    .emoji-4 {
      bottom: 0.5rem;
      right: 1.5rem;
      animation-delay: 3s;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .start-screen,
    .question-screen,
    .result-screen {
      display: none;
      animation: fadeIn 0.4s ease-out;
    }

    .active-screen {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .start-screen p {
      margin-top: 0.75rem;
      font-size: 1rem;
      color: #4b5563;
    }

    .big-button {
      margin-top: 1rem;
      padding: 0.9rem 2.2rem;
      border-radius: 999px;
      border: none;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 8px 0 #15803d;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }

    .big-button:active {
      transform: translateY(3px);
      box-shadow: 0 4px 0 #15803d;
    }

    .question-card {
      margin-top: 0.5rem;
      padding: 1rem;
      border-radius: 1.25rem;
      background: #eff6ff;
      border: 2px solid #bfdbfe;
      position: relative;
    }

    .question-top-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .question-label {
      font-size: 0.9rem;
      font-weight: 600;
      color: #6b7280;
      text-align: left;
    }

    .score-display {
      font-size: 0.9rem;
      font-weight: 600;
      color: #2563eb;
      text-align: right;
      white-space: nowrap;
    }

    .character-bubble {
      font-size: 2.4rem;
      margin: 0.5rem auto;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fef3c7, #f97316);
      box-shadow: 0 6px 0 rgba(194, 65, 12, 0.7);
    }

    .question-text {
      font-size: 1.2rem;
      font-weight: 600;
      color: #1f2933;
      margin-top: 0.5rem;
      margin-bottom: 0.75rem;
    }

    .question-text span.highlight {
      color: #1d4ed8;
      font-weight: 700;
    }

    .tts-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }

    .tts-button {
      border-radius: 999px;
      border: none;
      padding: 0.5rem 1rem;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      background-color: #fef3c7;
      color: #92400e;
      font-weight: 600;
      cursor: pointer;
      font-size: 0.9rem;
      box-shadow: 0 3px 0 #f59e0b;
    }

    .tts-button span {
      font-size: 1.1rem;
    }

    .tts-hint {
      font-size: 0.8rem;
      color: #6b7280;
    }

    .choices-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.75rem;
      margin-top: 0.25rem;
    }

    .choice-btn {
      flex: 1 1 140px;
      max-width: 220px;
      padding: 0.8rem 1rem;
      border-radius: 1rem;
      border: none;
      font-size: 1.05rem;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      box-shadow: 0 5px 0 rgba(0, 0, 0, 0.1);
      transition: transform 0.07s ease, box-shadow 0.07s ease;
    }

    .choice-btn:active {
      transform: translateY(3px);
      box-shadow: 0 2px 0 rgba(0, 0, 0, 0.1);
    }

    .choice-safe {
      background: linear-gradient(135deg, #bbf7d0, #4ade80);
      color: #065f46;
    }

    .choice-not-safe {
      background: linear-gradient(135deg, #fee2e2, #fb7185);
      color: #7f1d1d;
    }

    .choice-safe span.icon,
    .choice-not-safe span.icon {
      font-size: 1.4rem;
    }

    .feedback {
      margin-top: 0.75rem;
      font-size: 1rem;
      font-weight: 600;
      min-height: 1.4em;
    }

    .feedback.correct {
      color: #15803d;
      animation: pop 0.3s ease-out;
    }

    .feedback.incorrect {
      color: #b91c1c;
      animation: pop 0.3s ease-out;
    }

    @keyframes pop {
      0% { transform: scale(0.8); opacity: 0; }
      60% { transform: scale(1.05); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    .progress-dots {
      margin-top: 0.75rem;
      display: flex;
      justify-content: center;
      gap: 0.4rem;
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #e5e7eb;
    }

    .dot.active {
      background-color: #1d4ed8;
    }

    .dot.completed {
      background-color: #22c55e;
    }

    .result-screen h2 {
      font-size: 1.6rem;
      margin-bottom: 0.5rem;
      color: #1d4ed8;
    }

    .result-message {
      font-size: 1rem;
      color: #4b5563;
      margin-bottom: 1rem;
    }

    .result-score {
      font-size: 1.1rem;
      font-weight: 700;
      color: #16a34a;
      margin-bottom: 1rem;
    }

    .tip-box {
      margin-top: 0.5rem;
      background-color: #eef2ff;
      border-radius: 1rem;
      padding: 0.75rem;
      font-size: 0.9rem;
      color: #4b5563;
      text-align: left;
    }

    .tip-box strong {
      color: #4f46e5;
    }

    @media (max-width: 600px) {
      .game-container {
        padding: 1rem;
      }

      .game-title {
        font-size: 1.4rem;
      }

      .question-text {
        font-size: 1.05rem;
      }

      .big-button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="game-wrapper">
    <main class="game-container" aria-live="polite">
      <div class="floating-emoji emoji-1">üõ°Ô∏è</div>
      <div class="floating-emoji emoji-2">üíª</div>
      <div class="floating-emoji emoji-3">üåü</div>
      <div class="floating-emoji emoji-4">üß†</div>

      <header class="game-header">
        <div class="game-title">
          Stay Safe Online!
          <span class="small">Listen to each question and choose: <strong>Safe</strong> or <strong>Not Safe</strong>.</span>
          <div class="badge">üåê Digital Citizenship Game</div>
        </div>
      </header>

      <!-- START SCREEN -->
      <section class="start-screen active-screen" id="start-screen">
        <p>
          Help our friendly tablet buddy learn how to stay safe on the internet.
          Listen to each situation and decide if it is <strong>Safe</strong> or <strong>Not Safe</strong>.
        </p>
        <button class="big-button" id="start-btn">‚ñ∂Ô∏è Start Game</button>
      </section>

      <!-- QUESTION SCREEN -->
      <section class="question-screen" id="question-screen" aria-label="Question area">
        <div class="question-card">
          <div class="question-top-row">
            <div class="question-label" id="question-count">Question 1</div>
            <div class="score-display" id="score-display">Score: 0</div>
          </div>

          <div class="character-bubble" aria-hidden="true">
            üì±
          </div>

          <div class="question-text" id="question-text">
            <!-- Question text injected by JavaScript -->
          </div>

          <div class="tts-row">
            <button class="tts-button" id="tts-btn">
              <span>üîä</span> Read it to me
            </button>
          </div>
          <div class="tts-hint">If you can‚Äôt hear it, your device may have sound turned off.</div>

          <div class="choices-row" role="group" aria-label="Choose safe or not safe">
            <button class="choice-btn choice-safe" id="btn-safe">
              <span class="icon">‚úÖ</span>
              <span>Safe</span>
            </button>
            <button class="choice-btn choice-not-safe" id="btn-not-safe">
              <span class="icon">‚ö†Ô∏è</span>
              <span>Not Safe</span>
            </button>
          </div>

          <div class="feedback" id="feedback" aria-live="polite"></div>
          <div class="progress-dots" id="progress-dots">
            <!-- Dots added by JS -->
          </div>
        </div>
      </section>

      <!-- RESULT SCREEN -->
      <section class="result-screen" id="result-screen">
        <h2 id="result-title">Awesome job! üéâ</h2>
        <div class="result-message" id="result-message">
          <!-- Custom message -->
        </div>
        <div class="result-score" id="result-score">
          <!-- Score -->
        </div>
        <div class="tip-box">
          <strong>Safety Tips:</strong>
          <ul style="margin-top: 0.4rem; padding-left: 1.2rem;">
            <li>Only share personal information when a trusted grown-up says it is okay.</li>
            <li>Personal information includes your full name, school, address, phone number, or where you go every day.</li>
            <li>If something online feels scary or yucky, stop and tell a grown-up right away.</li>
          </ul>
        </div>
        <button class="big-button" id="play-again-btn" style="margin-top: 1.25rem;">
          üîÅ Play Again
        </button>
      </section>
    </main>
  </div>

  <script>
    // --- SCENARIOS ---
    // Each scenario has: text and correct answer (true = safe, false = not safe)
    const scenarios = [
      {
        text: "On a game, a box pops up that says: ‚ÄúCan you answer: What is your favorite food?‚Äù You want to type pizza.",
        isSafe: true
      },
      {
        text: "A new friend in an online game says: ‚ÄúCan you answer: Where do you go to school?‚Äù",
        isSafe: false
      },
      {
        text: "A website asks: ‚ÄúCan you answer: What is your favorite color?‚Äù You want to type blue.",
        isSafe: true
      },
      {
        text: "A message on a website says: ‚ÄúCan you answer: What is your home address?‚Äù",
        isSafe: false
      },
      {
        text: "A quiz online says: ‚ÄúCan you answer: What is your favorite animal?‚Äù You want to type lion.",
        isSafe: true
      },
      {
        text: "In a game, someone types: ‚ÄúCan you answer: What is your phone number?‚Äù",
        isSafe: false
      },
      {
        text: "A game asks for your first name only. You ask your grown-up first, and they say it is okay, so you type just your first name.",
        isSafe: true
      },
      {
        text: "A person you do NOT know sends a message in a game saying, ‚ÄúTell me your name and where you live.‚Äù",
        isSafe: false
      },
      {
        text: "A big colorful pop-up appears that says, ‚ÄúYOU WON A PRIZE! CLICK HERE NOW!‚Äù You click it quickly to see your prize.",
        isSafe: false
      },
      {
        text: "You see mean words about someone in your class in a chat. You tell a grown-up you trust.",
        isSafe: true
      },
      {
        text: "You make a username that has your full name and your school name in it.",
        isSafe: false
      },
      {
        text: "You choose a silly username like ‚ÄúRainbowPanda23‚Äù that does NOT show your real name.",
        isSafe: true
      },
      {
        text: "You feel scared by a picture in a video. You stop the video and tell a grown-up how you feel.",
        isSafe: true
      },
      {
        text: "Someone in a game asks you to keep a secret from your parents and to meet them alone.",
        isSafe: false
      }
    ];

    // --- STATE ---
    let currentIndex = 0;
    let score = 0;
    let answered = false;

    // --- DOM ELEMENTS ---
    const startScreen = document.getElementById("start-screen");
    const questionScreen = document.getElementById("question-screen");
    const resultScreen = document.getElementById("result-screen");

    const startBtn = document.getElementById("start-btn");
    const btnSafe = document.getElementById("btn-safe");
    const btnNotSafe = document.getElementById("btn-not-safe");
    const questionText = document.getElementById("question-text");
    const questionCount = document.getElementById("question-count");
    const scoreDisplay = document.getElementById("score-display");
    const feedback = document.getElementById("feedback");
    const ttsBtn = document.getElementById("tts-btn");
    const progressDots = document.getElementById("progress-dots");

    const resultTitle = document.getElementById("result-title");
    const resultMessage = document.getElementById("result-message");
    const resultScore = document.getElementById("result-score");
    const playAgainBtn = document.getElementById("play-again-btn");

    // --- SPEECH ---
    function speak(text) {
      if (!("speechSynthesis" in window)) {
        alert("Speech is not available on this device, but you can read the question with your teacher.");
        return;
      }
      window.speechSynthesis.cancel();
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.rate = 0.95;
      utterance.pitch = 1.0;
      utterance.lang = "en-US";
      window.speechSynthesis.speak(utterance);
    }

    // --- INITIALIZE PROGRESS DOTS ---
    function initProgressDots() {
      progressDots.innerHTML = "";
      scenarios.forEach((_, index) => {
        const dot = document.createElement("div");
        dot.className = "dot" + (index === 0 ? " active" : "");
        progressDots.appendChild(dot);
      });
    }

    function updateProgressDots() {
      const dots = progressDots.querySelectorAll(".dot");
      dots.forEach((dot, index) => {
        dot.classList.remove("active", "completed");
        if (index < currentIndex) {
          dot.classList.add("completed");
        } else if (index === currentIndex) {
          dot.classList.add("active");
        }
      });
    }

    // --- SHOW SCENARIO ---
    function showScenario() {
      answered = false;
      const scenario = scenarios[currentIndex];
      const number = currentIndex + 1;
      questionCount.textContent = "Question " + number + " of " + scenarios.length;

      let styledText = scenario.text
        .replace(/safe/gi, "<span class='highlight'>safe</span>")
        .replace(/not safe/gi, "<span class='highlight'>not safe</span>");

      questionText.innerHTML = styledText;
      feedback.textContent = "";
      feedback.classList.remove("correct", "incorrect");
      scoreDisplay.textContent = "Score: " + score;

      updateProgressDots();
    }

    // --- HANDLE ANSWER ---
    function handleAnswer(isSafeChoice) {
      if (answered) return; 
      answered = true;

      const scenario = scenarios[currentIndex];
      const isCorrect = scenario.isSafe === isSafeChoice;

      if (isCorrect) {
        score++;
        feedback.textContent = "Great job! ‚úÖ That‚Äôs the safe choice.";
        feedback.classList.remove("incorrect");
        feedback.classList.add("correct");
      } else {
        feedback.textContent = "Oops! ‚ö†Ô∏è Talk with a grown-up about the safe choice.";
        feedback.classList.remove("correct");
        feedback.classList.add("incorrect");
      }

      scoreDisplay.textContent = "Score: " + score;

      setTimeout(() => {
        currentIndex++;
        if (currentIndex < scenarios.length) {
          showScenario();
        } else {
          showResults();
        }
      }, 1500);
    }

    // --- SHOW RESULTS ---
    function showResults() {
      questionScreen.classList.remove("active-screen");
      resultScreen.classList.add("active-screen");

      const maxScore = scenarios.length;
      resultScore.textContent = "You got " + score + " out of " + maxScore + " questions correct!";

      if (score === maxScore) {
        resultTitle.textContent = "Perfect Protector! üõ°Ô∏è";
        resultMessage.textContent = "You are an online safety star! Keep making safe choices and talking with your grown-ups.";
      } else if (score >= Math.floor(maxScore * 0.6)) {
        resultTitle.textContent = "Safety Superhero! üí´";
        resultMessage.textContent = "You are learning how to stay safe online. Keep practicing and asking grown-ups for help!";
      } else {
        resultTitle.textContent = "Good Start! üå±";
        resultMessage.textContent = "You‚Äôre just beginning your online safety journey. Try again and talk about each question with your teacher.";
      }
    }

    // --- START GAME ---
    function startGame() {
      currentIndex = 0;
      score = 0;
      answered = false;

      startScreen.classList.remove("active-screen");
      resultScreen.classList.remove("active-screen");
      questionScreen.classList.add("active-screen");

      initProgressDots();
      showScenario();
    }

    // --- EVENT LISTENERS ---
    startBtn.addEventListener("click", () => {
      startGame();
      setTimeout(() => {
        speak(scenarios[currentIndex].text);
      }, 600);
    });

    btnSafe.addEventListener("click", () => handleAnswer(true));
    btnNotSafe.addEventListener("click", () => handleAnswer(false));

    ttsBtn.addEventListener("click", () => {
      const text = scenarios[currentIndex].text;
      speak(text);
    });

    playAgainBtn.addEventListener("click", () => {
      startGame();
      setTimeout(() => {
        speak(scenarios[currentIndex].text);
      }, 600);
    });
  </script>
</body>
</html>
