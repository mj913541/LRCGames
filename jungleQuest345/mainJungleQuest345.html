<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lions‚Äô Den Hub ‚Äî Worlds Map</title>
  <style>
    :root{
      --jungle-1:#0f3d2e;
      --jungle-2:#136f63;
      --jungle-3:#1a936f;
      --sand:#f1e9d2;
      --stone:#2e3d2f;
      --gold:#f4c95d;
      --shadow:0 10px 30px rgba(0,0,0,.25);
      --ring:#9ad1a4;
      --glow:#3cff90;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      color:#10342a; background: radial-gradient(1200px 600px at 50% 20%, #1b5e48, #0b241c 60%, #081812 100%);
      background-attachment: fixed;
    }
    .container{max-width:1100px; margin:0 auto; padding:24px}

    header{display:flex; align-items:center; gap:16px; justify-content:space-between; color:#eafbf2}
    .title{display:flex; align-items:center; gap:12px;}
    .title h1{margin:0; font-size:clamp(20px,3vw,32px)}
    .subtitle{opacity:.9; font-size:.95rem; margin-top:4px}

    .controls{display:flex; gap:8px; flex-wrap:wrap}
    button, .linklike{
      background:rgba(255,255,255,.1); color:#eafbf2; border:1px solid rgba(255,255,255,.25);
      padding:10px 14px; border-radius:12px; cursor:pointer; backdrop-filter: blur(6px);
    }
    button:hover,.linklike:hover{background:rgba(255,255,255,.18)}

    .map{
      position:relative; margin-top:18px; background:linear-gradient(180deg, rgba(241,233,210,.16), rgba(241,233,210,.05));
      border:1px solid rgba(255,255,255,.12); border-radius:22px; padding:20px; box-shadow:var(--shadow);
      overflow:hidden;
    }

    .statue{
      position:relative; z-index:1; display:flex; flex-direction:column; align-items:center; justify-content:center;
      width:min(480px, 80%); aspect-ratio:1/1; margin:30px auto; border-radius:999px;
      background: radial-gradient(60% 60% at 50% 45%, rgba(244,201,93,.18), rgba(0,0,0,.0) 70%);
    }
    .statue .disk{
      width:72%; aspect-ratio:1/1; border-radius:50%; background:conic-gradient(from 180deg, #244e3e, #1b3d30 50%, #244e3e 100%);
      border:8px solid #17362a; box-shadow: inset 0 0 0 6px #356d58, 0 12px 30px rgba(0,0,0,.35);
      display:grid; place-items:center; position:relative;
    }
    .statue .lion{font-size:clamp(48px, 8vw, 84px)}
    .statue h2{color:#e8f7ee; margin:10px 0 0; font-weight:700; text-shadow:0 2px 0 rgba(0,0,0,.25)}
    .statue p{color:#cfead9; margin:6px 0 0; font-size:.95rem}

    .orbit{
      --size:min(900px, 95vw);
      width:var(--size); height:var(--size); border-radius:50%;
      border:2px dashed rgba(154,209,164,.45); position:absolute; inset:0; margin:auto; pointer-events:none;
      filter:drop-shadow(0 0 8px rgba(154,209,164,.2));
    }

    .worlds{position:relative; width:100%; max-width:min(950px, 95vw); margin:0 auto; aspect-ratio:1/1}

    .world{
      position:absolute; width:160px; max-width:22vw; aspect-ratio:1/1; border-radius:24px;
      background:#eafbf2; border:2px solid #d7f1e2; box-shadow:var(--shadow);
      display:grid; grid-template-rows: 1fr auto; text-decoration:none; color:#0f2d22;
      transform:translate(-50%, -50%); transition: transform .15s ease, box-shadow .15s ease;
    }
    .world:hover{
      transform:translate(-50%, -50%) scale(1.05);
      box-shadow:0 14px 36px rgba(0,0,0,.32), 0 0 20px var(--glow), 0 0 40px var(--glow);
      animation: pulseGlow 1.5s infinite;
    }
    .world:focus{outline:4px solid var(--ring); outline-offset:2px}

    @keyframes pulseGlow{
      0%{box-shadow:0 14px 36px rgba(0,0,0,.32), 0 0 5px var(--glow), 0 0 10px var(--glow)}
      50%{box-shadow:0 14px 36px rgba(0,0,0,.32), 0 0 20px var(--glow), 0 0 40px var(--glow)}
      100%{box-shadow:0 14px 36px rgba(0,0,0,.32), 0 0 5px var(--glow), 0 0 10px var(--glow)}
    }

    .icon{display:grid; place-items:center; font-size:42px; padding-top:8px}
    .label{ padding:10px 12px; border-top:1px solid #dbeee4; background:#ffffff; border-radius:0 0 22px 22px;
      font-weight:700; text-align:center; font-size:.95rem}

    .badge{position:absolute; top:-10px; right:-10px; background:var(--gold); color:#5a4308; font-weight:800;
      border:2px solid #e3b84f; border-radius:999px; width:34px; height:34px; display:grid; place-items:center;
      box-shadow:0 8px 16px rgba(0,0,0,.25);}

    .complete{position:absolute; inset:0; border-radius:22px; box-shadow: inset 0 0 0 4px #8fd694; pointer-events:none}
    .complete::after{content:"‚úî"; position:absolute; bottom:8px; right:10px; color:#1d6a3b; font-weight:900}

    /* Evenly space 7 worlds around circle */
    .pos-1{left:50%; top:5%}
    .pos-2{left:85%; top:25%}
    .pos-3{left:85%; top:75%}
    .pos-4{left:50%; top:95%}
    .pos-5{left:15%; top:75%}
    .pos-6{left:15%; top:25%}
    .pos-7{left:50%; top:50%} /* placeholder for balance */

    .legend{display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:center; color:#def3e8;
      padding:14px 8px; font-size:.95rem; border-top:1px solid rgba(255,255,255,.12); margin-top:16px}
    .pill{display:inline-flex; gap:8px; align-items:center; background:rgba(255,255,255,.08); padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.18)}
    .dot{width:10px; height:10px; border-radius:999px; background:#8fd694; box-shadow:0 0 0 2px rgba(143,214,148,.25) inset}

    @media (max-width:780px){.world{width:130px}.statue{margin:20px auto}}
    @media (max-width:520px){.world{width:118px}.icon{font-size:36px}.label{font-size:.85rem}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title" aria-describedby="subtitle">
        <span style="font-size:28px">ü¶Å</span>
        <div>
          <h1>Lions‚Äô Den Hub ‚Äî Choose Your World</h1>
          <div id="subtitle" class="subtitle">Start anywhere. Inside each world, quests unlock in order. Earn XP and badges as you master the standards.</div>
        </div>
      </div>
      <div class="controls">
        <button id="resetProgressBtn" title="Clear local progress (teacher)">Reset Progress</button>
        <a class="linklike" href="#" id="exportBtn" title="Download a .json snapshot of progress">Export Progress</a>
        <label class="linklike" for="importFile" title="Import a saved .json progress file" style="cursor:pointer">Import Progress<input id="importFile" type="file" accept="application/json" style="display:none"></label>
      </div>
    </header>

    <main class="map" role="region" aria-label="Worlds Map">
      <div class="statue" aria-hidden="false">
        <div class="disk">
          <div class="lion">ü¶Å</div>
        </div>
        <h2>The Lions‚Äô Den</h2>
        <p>Pick a world to begin your adventure.</p>
      </div>

      <div class="orbit" aria-hidden="true"></div>

      <section class="worlds" aria-label="World entrances">
        <a class="world pos-1" href="./worlds/genre-jungle.html" data-world="genre-jungle">
          <span class="badge" aria-label="Badges earned">0</span>
          <div class="icon" aria-hidden="true">üìöüåø</div>
          <div class="label">Genre Jungle</div>
        </a>
        <a class="world pos-2" href="./worlds/research-volcano.html" data-world="research-volcano">
          <span class="badge" aria-label="Badges earned">0</span>
          <div class="icon" aria-hidden="true">üåãüîé</div>
          <div class="label">Research Volcano</div>
        </a>
        <a class="world pos-3" href="./worlds/dc-sky-realm.html" data-world="dc-sky-realm">
          <span class="badge" aria-label="Badges earned">0</span>
          <div class="icon" aria-hidden="true">‚òÅÔ∏èüõ°Ô∏è</div>
          <div class="label">Sky Realm</div>
        </a>
        <a class="world pos-4" href="./worlds/catalog-caverns.html" data-world="catalog-caverns">
          <span class="badge" aria-label="Badges earned">0</span>
          <div class="icon" aria-hidden="true">üïØÔ∏èüóÇÔ∏è</div>
          <div class="label">Catalog Caverns</div>
        </a>
        <a class="world pos-5" href="./worlds/tech-trail.html" data-world="tech-trail">
          <span class="badge" aria-label="Badges earned">0</span>
          <div class="icon" aria-hidden="true">üõ§Ô∏èüíª</div>
          <div class="label">Tech Trail</div>
        </a>
        <a class="world pos-6" href="./worlds/typing-temple.html" data-world="typing-temple">
          <span class="badge" aria-label="Badges earned">0</span>
          <div class="icon" aria-hidden="true">‚å®Ô∏è‚õ©Ô∏è</div>
          <div class="label">Typing Temple</div>
        </a>
        <a class="world pos-7" href="./worlds/creative-kingdom.html" data-world="creative-kingdom">
          <span class="badge" aria-label="Badges earned">0</span>
          <div class="icon" aria-hidden="true">üè∞üé®</div>
          <div class="label">Creative Kingdom</div>
        </a>
      </section>

      <footer class="legend" aria-label="Legend">
        <span class="pill"><span class="dot"></span> Green ring around a world = all quests complete</span>
        <span class="pill">Number badge = badges earned in that world</span>
        <span class="pill">Tip: You can start anywhere</span>
      </footer>
    </main>
  </div>

  <script>
    const DEFAULT_PROGRESS = {
      "genre-jungle": { badges: 0, complete: false },
      "research-volcano": { badges: 0, complete: false },
      "dc-sky-realm": { badges: 0, complete: false },
      "catalog-caverns": { badges: 0, complete: false },
      "tech-trail": { badges: 0, complete: false },
      "typing-temple": { badges: 0, complete: false },
      "creative-kingdom": { badges: 0, complete: false }
    };

    function loadProgress(){
      try{ return JSON.parse(localStorage.getItem('lionsden.progress.v1')) || DEFAULT_PROGRESS }catch{ return DEFAULT_PROGRESS }
    }
    function saveProgress(p){ localStorage.setItem('lionsden.progress.v1', JSON.stringify(p)) }

    function maybeSeedDemo(p){
      if(!location.search.includes('demo')) return p;
      const worlds = Object.keys(p);
      worlds.forEach((w,i)=>{
        p[w].badges = Math.floor(Math.random()*4);
        p[w].complete = Math.random()>.6;
      });
      return p;
    }

    function render(){
      const progress = loadProgress();
      document.querySelectorAll('.world').forEach(el=>{
        const id = el.dataset.world; if(!id) return;
        const p = progress[id] || {badges:0, complete:false};
        const badge = el.querySelector('.badge');
        if(badge) badge.textContent = p.badges || 0;
        el.querySelector('.complete')?.remove();
        if(p.complete){
          const c = document.createElement('div'); c.className = 'complete'; el.appendChild(c);
        }
      });
    }

    document.getElementById('resetProgressBtn')?.addEventListener('click', ()=>{
      if(confirm('Reset local progress for all worlds?')){ saveProgress(DEFAULT_PROGRESS); render(); }
    });
    document.getElementById('exportBtn')?.addEventListener('click', (e)=>{
      e.preventDefault();
      const blob = new Blob([JSON.stringify(loadProgress(), null, 2)], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'lionsden-progress.json';
      a.click();
      URL.revokeObjectURL(a.href);
    });
    document.getElementById('importFile')?.addEventListener('change', (e)=>{
      const file = e.target.files?.[0]; if(!file) return;
      const reader = new FileReader();
      reader.onload = () => {
        try{
          const obj = JSON.parse(reader.result);
          saveProgress(Object.assign({}, DEFAULT_PROGRESS, obj));
          render();
        }catch(err){ alert('Invalid file. Please choose a valid progress .json'); }
      };
      reader.readAsText(file);
    });

    (function init(){
      if(location.search.includes('demo') && !localStorage.getItem('lionsden.progress.v1')){
        saveProgress(maybeSeedDemo(loadProgress()));
      }
      render();
    })();
  </script>
</body>
</html>
