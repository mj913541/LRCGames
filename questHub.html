<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LRC Quest Hub</title>

  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(to bottom, #fff8e1, #f3e8ff);
      min-height: 100vh;
      font-family: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .world-btn {
  display: block;
  width: 100%;
  padding: 0.75rem 1rem;
  background-color: #7c3aed; /* purple-600 */
  color: #ffffff;
  border-radius: 0.75rem; /* rounded-xl */
  font-weight: 600;
  text-align: center;
  transition: background-color 0.2s ease;
  text-decoration: none;
}
.world-btn:hover { background-color: #6d28d9; } /* purple-700 */
  </style>
</head>

<body class="p-6">
  <!-- Main Container -->
  <div class="max-w-3xl mx-auto bg-white shadow-xl rounded-3xl p-6 mt-10">

    <!-- Greeting Section -->
    <h1 id="studentGreeting" class="text-3xl font-bold mb-1 text-purple-700">
      Welcome, Explorer!
    </h1>

    <p id="studentDetails" class="text-gray-700 mb-1 text-sm">
      Loading your info...
    </p>

    <p id="tierDetails" class="text-gray-500 mb-6 text-xs">
      Tier: (checking...)
    </p>

<div class="space-y-3">
  <a href="./worlds/genreWorld/genreWorld.html" class="world-btn block text-center">
    ğŸ“š Genre World
  </a>

  <a href="./worlds/researchWorld/researchWorld.html" class="world-btn block text-center">
    ğŸ” Research Treehouse
  </a>

  <a href="./worlds/digitalCitizenship/digitalCitizenship.html" class="world-btn block text-center">
    ğŸ›¡ Digital Citizenship Skylands
  </a>

  <a href="./worlds/librarySkills/librarySkills.html" class="world-btn block text-center">
    ğŸ› Library Skills Village
  </a>

  <a href="./worlds/techSkills/techSkills.html" class="world-btn block text-center">
    ğŸ–¥ Tech Skills Mountain
  </a>

  <a href="./worlds/creativeProjects/creativeProjects.html" class="world-btn block text-center">
    ğŸ¨ Creative Projects Cove
  </a>

  <a href="./plannerDashboard/dashboard.html" class="world-btn block text-center">
    ğŸ® Lion Head Arcade
  </a>
</div>


    <!-- Logout -->
    <button
      id="logoutBtn"
      class="mt-8 w-full py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold"
    >
      Log Out
    </button>

  </div>

  <!-- Core Logic -->
  <script type="module">
    import {
      requireLogin,
      getLocalStudent,
      getLocalTier,
      getLocalProgress,
      logOut
    } from "./scripts/lrcQuestCore.js";

    const greetingEl = document.getElementById("studentGreeting");
    const detailsEl = document.getElementById("studentDetails");
    const tierEl = document.getElementById("tierDetails");
    const logoutBtn = document.getElementById("logoutBtn");

    function showGreeting(user, student) {
      const name =
        (student && student.fullName) ||
        user.displayName ||
        "Explorer";

      const email =
        (student && student.email) ||
        user.email ||
        "";

      greetingEl.textContent = `ğŸ¦ Welcome, ${name}!`;
      detailsEl.textContent = email
        ? `Signed in as ${email}`
        : "Signed in with your school Google account.";

      const tier = getLocalTier();
      tierEl.textContent = `Tier: ${tier}`;

      // Optional: peek at progress in console for now
      const progress = getLocalProgress();
      console.log("LRC Quest progress for this player:", progress);
    }

    // Make sure only logged-in kids can see the hub
    requireLogin((user) => {
      const student = getLocalStudent();
      showGreeting(user, student);
    });

    // Logout button
    logoutBtn.addEventListener("click", async () => {
      await logOut();
    });
  </script>
</body>
</html>
