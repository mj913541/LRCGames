<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Schedule Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #87ceeb; /* Sky blue background */
        }

        .road-container {
            position: relative;
            width: 90%;
            height: 200px; /* Adjust as needed */
            margin-bottom: 20px; /* Space for buttons */
        }

        .road {
            position: absolute;
            width: 100%;
            height: 45px; /* Adjust height as needed */
            top: 50%;
            background-color: #333; /* Dark grey for the road */
        }

        .dashed-line {
            position: absolute;
            width: 100%;
            height: 40px; /* Adjust height as needed */
            top: 60%;
            border-top: 2px dashed white; /* Create a dashed line */
        }

        .rocking-image {
            position: absolute;
            width: 100px; /* Adjust as needed */
            bottom: 70px; /* Adjust to position the lion above the road */
            animation: rock 2s infinite;
            transition: left 1s ease, transform 1s ease;
            z-index: 10; /* Ensure the lion is always in front of icons */
        }

        @keyframes rock {
            0%, 100% { transform: rotate(15deg); }
            25% { transform: rotate(-15deg); }
            50% { transform: rotate(15deg); }
            75% { transform: rotate(-15deg); }
        }

        .icon {
            position: absolute;
            bottom: 90px;
            font-size: 50px; /* Adjusted for more stops */
            z-index: 5; /* Ensure icons are behind the lion */
        }

        /* Rearranged emoji stops */
        .icon.stop-1 { left: 2%; }   /* Home */
        .icon.stop-2 { left: 12%; }  /* Bus */
        .icon.stop-3 { left: 22%; }  /* Reading */
        .icon.stop-4 { left: 32%; }  /* Recess */
        .icon.stop-5 { left: 42%; }  /* Lunch */
        .icon.stop-6 { left: 52%; }  /* Social Studies & Science */
        .icon.stop-7 { left: 62%; }  /* Writing */
        .icon.stop-8 { left: 72%; }  /* LRC */
        .icon.stop-9 { left: 82%; }  /* Math */
        .icon.stop-10 { left: 92%; } /* Bus */
        .icon.stop-11 { left: 98%; } /* Home */

        button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            display: none; /* Initially hide the buttons */
        }
    </style>
</head>
<body>
    <div class="road-container">
        <div class="road"></div>
        <div class="dashed-line"></div>
        <img id="lion" src="https://drive.google.com/thumbnail?id=11d2nVywZy-c7Fu7RzVI9nHUCBZIFYDAI" class="rocking-image" style="left: 0;">
        <div class="icon stop-1">üè†</div>
        <div class="icon stop-2">üöå</div>
        <div class="icon stop-3">üìö</div>
        <div class="icon stop-4">‚öΩ</div>
        <div class="icon stop-5">üçΩÔ∏è</div>
        <div class="icon stop-6">üåç</div>
        <div class="icon stop-7">‚úçÔ∏è</div>
        <div class="icon stop-8">üè´</div>
        <div class="icon stop-9">‚ûï</div>
        <div class="icon stop-10">üöå</div>
        <div class="icon stop-11">üè†</div>
    </div>

    <button id="nextButton">Next</button>

    <script>
const lion = document.getElementById("lion");
const nextButton = document.getElementById("nextButton");

const stops = [
    { emoji: "üè†", activityUrl: "./1_typingWarmUp.html" },
    { emoji: "üöå", activityUrl: "./5_01_activity_coin1.html" },
    { emoji: "üìö", activityUrl: "./5_01_activity_coin2.html" },
    { emoji: "‚öΩ", activityUrl: "./5_01_activity_recess.html" },
    { emoji: "üçΩÔ∏è", activityUrl: "./5_01_activity_lunch.html" },
    { emoji: "üåç", activityUrl: "./5_01_activity_socialstudies.html" },
    { emoji: "‚úçÔ∏è", activityUrl: "./5_01_activity_writing.html" },
    { emoji: "üè´", activityUrl: "./5_01_activity_lrc.html" },
    { emoji: "‚ûï", activityUrl: "./5_01_activity_math.html" },
    { emoji: "üöå", activityUrl: "./5_01_activity_bus.html" },
    { emoji: "üè†", activityUrl: "./5_01_activity_home.html" }
];

let currentStop = 0;

nextButton.style.display = "block";

nextButton.addEventListener("click", () => {
    if (currentStop < stops.length) {
        moveLionToNextStop();
        triggerActivity(stops[currentStop]);
        currentStop++;
    } else {
        nextButton.style.display = "none";
    }
});

function moveLionToNextStop() {
    const stopClass = `.icon.stop-${currentStop + 1}`;
    const stopElement = document.querySelector(stopClass);
    if (stopElement) {
        lion.style.left = stopElement.style.left;
    }
}

function triggerActivity(stop) {
    const activityTab = window.open(stop.activityUrl, '_blank');
    // Handle completion in global event listener
}

function handleStorageEvent(event) {
    // Check if the activity completion matches the current stop's emoji
    if (event.key === stops[currentStop].emoji && event.newValue === 'completed') {
        nextButton.style.display = "block";
        localStorage.removeItem(event.key); // Clean up localStorage
        moveLionToNextStop(); // Move the lion to the next stop
    }
}

// Add storage event listener globally
window.addEventListener('storage', handleStorageEvent);

    </script>
</body>
</html>
